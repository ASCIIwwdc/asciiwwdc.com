!!! 5
%html{lang: "en-US"}
  %head
    %meta{charset: "utf-8"}
    - if @session
      %title= title("WWDC #{@session.year} Session #{@session.number}", @session.title, "ASCIIwwdc")
    - elsif @query
      %title= title("Search Results for \"#{@query}\"", "ASCIIwwdc")
    - else
      %title= title("ASCIIwwdc", "Searchable full-text transcripts of WWDC sessions")

    - description = (@session.description rescue "Searchable full-text transcripts of WWDC sessions.")
    %meta{name: "author", content: "Mattt"}
    %meta{name: "description", content: description}
    %meta{name: "viewport", content: "width=device-width, initial-scale=1, viewport-fit=cover"}
    %link{rel: "stylesheet", type: 'text/css', href: "/css/screen.css", media: "screen", charset: "utf-8"}

    %link{href: "/apple-touch-icon.png", rel: "apple-touch-icon", sizes: "180x180"}
    %link{href: "/favicon-32x32.png", rel: "icon", sizes: "32x32", type: "image/png"}
    %link{href: "/favicon-16x16.png", rel: "icon", sizes: "16x16", type: "image/png"}
    %link{href: "/site.webmanifest", rel: "manifest"}
    %link{color: "#33005d", href: "/safari-pinned-tab.svg", rel: "mask-icon"}
    %meta{content: "#603cba", name: "msapplication-TileColor"}
    %meta{content: "#ffffff", name: "theme-color"}

    %meta{property: "og:site_name", content: "ASCIIwwdc"}
    %meta{property: "og:title", content: title("ASCIIwwdc", (@session.title rescue nil))}
    %meta{property: "og:url", content: "https://asciiwwdc.com"}
    %meta{property: "og:description", content: (@session.description rescue description)}
    %meta{property: "og:image", content: (image_url(@session) rescue nil)}

    - if @session
      %link{rel: "canonical", href: url(@session)}
      %link{rel: "alternate", hreflang: "en-us", href: url(@session)}
      %link{rel: "alternate", hreflang: "x-default", href: url(@session)}
      %link{rel: "alternate", type: 'application/json', href: url(@session), charset: "utf-8"}
      %link{rel: "alternate", type: 'text/vtt', href: url(@session), charset: "utf-8"}
    - elsif @query
      %meta{name: "robots", content: "noindex"}
    - else
      %link{rel: "canonical", href: "https://asciiwwdc.com"}
      %link{rel: "alternate", hreflang: "en-us", href: "https://asciiwwdc.com"}
      %link{rel: "alternate", hreflang: "x-default", href: "https://asciiwwdc.com"}

  %body
    %header{role: 'banner'}
      %div{role: 'container'}
        %span#logo
          %a{href: '/'} ASCIIwwdc

        - unless request.path == '/'
          %form#search{method: 'GET', action: '/search'}
            %input{type: 'search', name: 'q', value: @query, placeholder: "Search for WWDC Sessions...", tabindex: 1, autocapitalize: "off", autocorrect: "off", autofocus: "autofocus", "x-webkit-speech" => "x-webkit-speech"}

        = yield_content :header

    .content
      %div{role: 'container'}
        = yield

    %footer
      %div{role: 'container'}
        #about
          %strong.logo ASCIIwwdc

          :markdown
            Searchable full-text transcripts of WWDC sessions.

          :plain
            <p><a href="http://nshipster.com/"><img src="/images/nshipster@2x.png" class="nshipster" alt="NSMustachio" width="45" height="26"></a><br>
            An <strong>NSHipster</strong> Project</p>

        #colophon
          :markdown
            Created by normalizing and indexing video transcript files provided for WWDC videos. Check out the app's [source code on GitHub](https://github.com/ASCIIwwdc/asciiwwdc.com) for additional implementation details, as well as information about the webservice APIs made available.

          :plain
            <p>Additional transcripts for 2012 WWDC content graciously contributed by <a href="http://www.rev.com" rel="nofollow">Rev.com</a>, as well as Carlos Arcenas, Christopher Bowns, Daniel Schneller, Janek Spaderna, Jorge Galrito, Tyler Bindon, YoonHyung Jo, and other <a href="https://github.com/mattt/wwdc-session-transcripts/graphs/contributors" rel="nofollow">community volunteers</a></p>

          :markdown
            Built on [Sinatra](http://www.sinatrarb.com). Powered by [Heroku](https://www.heroku.com) and [Heroku Postgres](https://postgres.heroku.com).

        #copyright
          :markdown
            All content copyright © 2010 – 2019 Apple Inc. All rights reserved.
